<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>فرم کار در منزل</title>
  <style>
    body {
      font-family: sans-serif;
      direction: rtl;
      text-align: right;
      margin: 30px auto;
      max-width: 500px;
      background: #fafafa;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 10px rgba(0,0,0,.1);
    }
    input, textarea, select, button {
      width: 100%;
      margin: 10px 0;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    button {
      background: #4CAF50;
      color: white;
      font-size: 16px;
    }
    button:disabled {
      background: gray;
    }
  </style>
</head>
<body>
  <h2>فرم ثبت‌نام کار در منزل</h2>
  
  <form id="mainForm">
    <label>نام و نام خانوادگی *</label>
    <input name="name" required>

    <label>شماره تماس *</label>
    <input name="phone" type="tel" required>

    <label>توضیحات</label>
    <textarea name="desc"></textarea>

    <label>آدرس *</label>
    <textarea name="address" required></textarea>

    <label>تاریخ تولد *</label>
    <input name="birth" type="date" required>

    <label>جنسیت *</label>
    <select name="gender" required>
      <option value="">انتخاب کنید</option>
      <option value="زن">زن</option>
      <option value="مرد">مرد</option>
    </select>

    <label>امکانات در منزل</label>
    <textarea name="tools"></textarea>

    <label>آپلود عکس (اختیاری)</label>
    <input type="file" id="photo" multiple accept="image/*">

    <button type="submit" id="submitBtn">ارسال اطلاعات</button>
  </form>

  <script>
    const form = document.getElementById('mainForm');
    const btn = document.getElementById('submitBtn');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      btn.disabled = true;
      btn.textContent = "در حال ارسال...";

      const files = document.getElementById('photo').files;
      const photos = [];

      for (const file of files) {
        const reader = new FileReader();
        photos.push(await new Promise(res => {
          reader.onload = () => res(reader.result);
          reader.readAsDataURL(file);
        }));
      }

      const formData = new FormData(form);
      formData.append('photoData', JSON.stringify(photos));

      const response = await fetch('https://script.google.com/macros/s/AKfycbxPTgjX_2-85byk-9nCKgCLl9rBqZ1G3PEzmw4-mTixFC3bzDap6duRNsTnwUfu1lDF/exec', {
        method: 'POST',
        body: formData
      });

      const text = await response.text();
      document.body.innerHTML = text;
    });
  </script>
</body>
</html>
